<div class="container-fluid shadow-lg pb-1 mb-4 bg-success bg-gradient">
    <div class="container">
    <header class="d-flex flex-wrap justify-content-center align-items-center py-3 mb-4 border-bottom">
        <img src="/imagenes/logo.png" class="me-auto" height="80px" alt="logo">
        
        <ul class="nav nav-pills">
            <% if (user) { %> <!-- Revisa si la variable usuario existe (user se entrega desde el servidor con render) -->
                <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" href="/perfilUsuario"><img class="me-2" width="30px" height="30px" src="/imagenes/default_profile.png" id="profile-icon" alt="pfp">Perfil</a></li>
                <li class="nav-item"><div class="dropdown">
                    <button class="btn btn-outline-light me-3 btn-lg dropdown-toggle" type="button" data-bs-toggle="dropdown">Notificaciones</button>
                    <ul class="dropdown-menu" id="header-notifs-menu">
                        <!-- Aquí van las notificaciones -->
                    </ul>
                </div></li>
                <button class="btn btn-danger" id="testoast">Simular notificación nueva</button>
                <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" href="/mis_solicitudes">Mis solicitudes</a></li>

                <!-- Mostrar solo para admin -->
                <% if (user.tipousuario == 'admin') { %>
                    <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" href="/admin">Panel administrador</a></li>
                <% } %>

                <!-- Mostrar solo para recepcionista -->
                <% if (user.tipousuario == 'recepcionista') { %>
                    <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" href="/recepcionista">Panel recepcionista</a></li>
                <% } %>

                <!-- Botón común para todos los usuarios logueados -->
                <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" href="/logout">Cerrar Sesión</a></li>

            <% } else { %>
                <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" role="button" href="/login">Iniciar Sesión</a></li>
                <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" href="/registro">Registrarse</a></li>
            <% } %>

            <% if (!index) { %>     <!-- Si index es false (no se llamó este partial desde index) se mostrará un boton para volver al inicio -->
                <li class="nav-item"><a class="btn btn-outline-light me-3 btn-lg" href="/">Inicio</a></li>
            <% } %>
        </ul>
    
        <div class="toast-container position-fixed top-0 end-0 p-3">
            <div id="notifToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
              <div class="toast-header">
                <strong class="me-auto">Nueva Notificación</strong>
                <small class="text-muted">Ahora</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
              </div>
              <div class="toast-body d-flex align-items-center gap-2 py-2" id="toast-body">
                <!-- Aquí va el contenido del toast -->
              </div>
            </div>
          </div>
    </header>
    </div>
</div>